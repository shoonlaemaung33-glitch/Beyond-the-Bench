<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environmental Awareness Park Quiz | Beyond the Bench </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
      <!-- Kurale-regular -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kurale&display=swap" rel="stylesheet">
  <link rel="shortcut icon" href="https://i.pinimg.com/736x/e1/49/03/e1490326a256a9ae6c9a2ffc0fdf2986.jpg" type="image/x-icon">
  
    <style>
       

        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Kurale", serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #005b4c90   0%,#005b4c 50%, #d8eb8e 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        /* Fireworks Container */
        #fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: none;
        }

        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: explode 1.5s forwards;
        }

        @keyframes explode {
            0% {
                transform: translateY(100vh);
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% {
                transform: translateY(0) scale(2);
                opacity: 0;
            }
        }

        /* Header */
        header {
            text-align: center;
            padding: 30px 0 40px;
        }

        .logo {
            font-size: 3.2rem;
            font-weight: 900;
            background: linear-gradient(
            135deg,
            #f1f7d8 30%,
            #d8eb8e 70%,
            #bcd9cf 100%
            );
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tagline {
            font-size: 1.2rem;
            color: #d8eb8e;
            max-width: 700px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        /* Timer Container */
        .timer-container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            border: 3px solid #d8eb8e;
            position: relative;
            overflow: hidden;
        }

        .timer-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
           background: linear-gradient(
            135deg,
            #edf9ba 30%,
            #d8eb8e 70%,
            #dbf37d 100%
            );
        }

        .score-display {
            font-size: 1.8rem;
            font-weight: 700;
            color: #005b4c;
        }

        .score-display span {
            font-size: 2.5rem;
            color: #cbe75b;
        }

        .timer-display {
            text-align: center;
        }

        .timer-label {
            font-size: 1.5rem;
            color: #005b4c;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .timer {
            font-size: 2.8rem;
            font-weight: 800;
            color:  #cbe75b;
            font-family: 'Courier New', monospace;
        }

        .timer.warning {
            color: #FF4500;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Quiz Container */
        .quiz-container {
            background: white;
            border-radius: 25px;
            padding: 50px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            min-height: 500px;
        }

        .quiz-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
             background: linear-gradient(
            135deg,
            #edf9ba 30%,
            #d8eb8e 70%,
            #dbf37d 100%
            );
        }

        /* Question Styles */
        .question-container {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .question-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-number {
            display: inline-block;
            background: #005b4c;
            color:#d8eb8e;
            padding: 8px 25px;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .question-text {
            font-size: 1.8rem;
            color: #005b4c;
            margin-bottom: 40px;
            line-height: 1.4;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .option {
            background: #d8eb8e;
            border: 2px solid #d8eb8e;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover:not(.disabled) {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(46, 139, 87, 0.15);
            border-color: #005b4c;
        }

        .option.selected.correct {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-color: #28a745;
            color: #155724;
        }

        .option.selected.incorrect {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border-color: #dc3545;
            color: #721c24;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .option-text {
            font-weight: 500;
            font-size: 1.1rem;
            color: #005b4c;
        }

        .option.selected .option-text {
            font-weight: 600;
        }

        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.95rem;
            display: none;
        }

        .correct-answer .feedback {
            display: block;
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .incorrect-answer .feedback {
            display: block;
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        /* Navigation Buttons */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-prev {
           background: #005b4cad;
            color:  #d8eb8e;
        }

        .btn-prev:hover:not(:disabled) {
             transform: translateY(-3px);
               background: #005b4c;
        }

        .btn-prev:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-next {
             background: #005b4cad;
            color:  #d8eb8e;
            box-shadow: 0 5px 15px rgba(46, 139, 87, 0.3);
        }

        .btn-next:hover:not(:disabled) {
            background: #005b4c;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(46, 139, 87, 0.4);
        }

        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-submit {
            background: #005b4cad;
            color:  #d8eb8e;
            margin: 0 auto;
        }

        .btn-submit:hover {
             background: #005b4c;
            transform: scale(1.05);
            box-shadow: 0 8px 20px #d8eb8e61;
        }

        /* Results Section */
        .results-container {
            display: none;
            text-align: center;
            padding: 40px 0;
            animation: fadeIn 0.8s ease;
        }

        .results-title {
            font-size: 2.8rem;
            margin-bottom: 30px;
             background: linear-gradient(
            135deg,
            #f1f7d8 30%,
            #d8eb8e 70%,
            #bcd9cf 100%
            );
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            margin: 0 auto 40px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
           background: conic-gradient(
            #d8eb8e 0% 30%,   /* from 0% to 30% use #d8eb8e */
            white 30% 100%  /* from 30% to 100% use #005b4c */
            );
            position: relative;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 170px;
            height: 170px;
            background: white;
            border-radius: 50%;
        }

        .score-value {
            font-size: 3.5rem;
            font-weight: 800;
            color: #005b4c;
            position: relative;
            z-index: 2;
        }

        .score-total {
            font-size: 1.5rem;
            color: #005b4c;
            position: relative;
            z-index: 2;
        }

        .score-message {
            font-size: 1.8rem;
            font-weight: 600;
            margin: 20px 0;
            color: #d8eb8e;
        }

        .perfect-score {
            color: #d8eb8e;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }

        .celebration-text {
            font-size: 2.2rem;
            font-weight: 700;
            color: #d8eb8e;
            margin: 30px 0;
            animation: bounce 1s infinite alternate;
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-10px); }
        }

        .results-details {
            background: #f8f9fa;
            color: #005b4c;
            border-radius: 20px;
            padding: 30px;
            margin: 40px auto;
            max-width: 800px;
            text-align: left;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-correct {
            color: #28a745;
            font-weight: 600;
        }

        .detail-incorrect {
            color: #dc3545;
            font-weight: 600;
        }

        /* Audio Controls */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .audio-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #005b4c;
            color: #d8eb8e;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .audio-btn:hover {
            transform: scale(1.1);
             background: #d8eb8e;
            color:   #005b4c;
        }


        /* Responsive */
        @media (max-width: 992px) {
            .quiz-container {
                padding: 40px 30px;
            }
            
            .question-text {
                font-size: 1.6rem;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .timer-container {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
        }

        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .results-title {
                font-size: 2.2rem;
            }
            
            .logo {
                font-size: 2rem;
            }
            
            .timer {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 480px) {
            .quiz-container {
                padding: 30px 20px;
            }
            
            .question-text {
                font-size: 1.4rem;
            }
            
            .score-circle {
                width: 150px;
                height: 150px;
            }
            
            .score-circle::before {
                width: 130px;
                height: 130px;
            }
            
            .score-value {
                font-size: 2.5rem;
            }
        }
        #start-timer-btn {
    background-color: #005b4c;  
    color: #d8eb8e;
    border: none;
    padding: 12px 22px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s ease;
}

#start-timer-btn:hover {
    background-color: #024238;
    transform: scale(1.05);
}

#start-timer-btn:active {
    transform: scale(0.95);
}
#start-timer-btn {
    transition: opacity 0.4s ease, transform 0.3s ease;
}
.option.locked {
    pointer-events: none;
    opacity: 0.5;
    cursor: not-allowed;
}

/* Big animated result text for all scores */
#score-message {
    font-size: 2.5rem; /* make it big */
    font-weight: bold;
    text-align: center;
    animation: moveText 2s ease-in-out infinite alternate; /* up & down movement */
}

/* Moving text animation */
@keyframes moveText {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
    100% { transform: translateY(0px); }
}

/* Optional: different colors for passing vs failing */
#score-message.passing {
    color: #d8eb8e; /* green for 7-9 marks */
}

#score-message.sad {
    color: #ff6b6b; /* red for <7 marks */
}

#fireworks-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9999;
    display: none;
    overflow: hidden;
}

/* ðŸ”¥ Mega fireworks */
.mega-firework {
    position: absolute;
    border-radius: 50%;
    animation: megaExplode 1.6s ease-out forwards;
}

@keyframes megaExplode {
    from {
        transform: translate(0, 0) scale(0.3);
        opacity: 1;
    }
    to {
        transform: translate(var(--x), var(--y)) scale(1.6);
        opacity: 0;
    }
}

/* ðŸ’¥ Shockwave ring */
.shockwave {
    position: absolute;
    width: 20px;
    height: 20px;
    border: 2px solid white;
    border-radius: 50%;
    animation: shockwave 1.2s ease-out forwards;
}

@keyframes shockwave {
    to {
        transform: scale(8);
        opacity: 0;
    }
}

/* ðŸŒ§ï¸ Rain */
.rain-drop {
    position: absolute;
    top: -20px;
    width: 2px;
    height: 20px;
    background: rgba(180,180,180,0.6);
    animation: rainFall linear forwards;
}

@keyframes rainFall {
    to {
        transform: translateY(110vh);
        opacity: 0;
    }
}

/* ðŸ’” Broken sparks */
.broken-spark {
    position: absolute;
    top: -10px;
    width: 6px;
    height: 6px;
    background: #6c757d;
    border-radius: 50%;
    animation: brokenFall linear forwards;
}

@keyframes brokenFall {
    to {
        transform: translateY(110vh) scale(0.3);
        opacity: 0;
    }
}

</style>
</head>
<body >
    
    <!-- Quiz Access Control -->
    <div id="quiz-access-control" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: linear-gradient(135deg, #005b4c90 0%, #005b4c 50%, #d8eb8e 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 99999;
        font-family: 'Kurale', serif;
    ">
        <div style="
            background: white;
            padding: 50px;
            border-radius: 25px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 5px solid #d8eb8e;
            max-height: 100vh;        
            overflow-y: auto;      
        ">
        <div style="font-size: 4rem; margin-bottom: 20px; color:#005b4c;">
                <i class="fa-solid fa-user-lock  fa-bounce"></i>
        </div>
            <h2 style="
                color: #005b4c;
                margin-bottom: 15px;
                font-size: 2.2rem;
            ">
                Quiz Access Required
            </h2>
            
            <p style="
                color: #666;
                font-size: 1.1rem;
                line-height: 1.6;
                margin-bottom: 30px;
            ">
                This environmental awareness quiz is only available for registered users.<br>
                Please log in or register to continue.
            </p>
            
            <div style="
                background: #f8f9fa;
                border-radius: 15px;
                padding: 25px;
                margin: 30px 0;
                border-left: 4px solid #005b4c;
            ">
                <h3 style="color: #005b4c; margin-bottom: 15px;">
                <i class="fa-solid fa-brain me-2"></i> Quiz Features
                </h3>
                <ul style="
                    text-align: left;
                    color: #555;
                    line-height: 1.8;
                    margin: 0;
                    padding-left: 20px;
                ">
                    <li>10 environmental awareness questions</li>
                    <li>5-minute timed quiz</li>
                    <li>Instant feedback & explanations</li>
                    <li>Celebratory animations for high scores</li>
                    <li>Track your environmental knowledge</li>
                </ul>
            </div>
            
            <div style="margin-top: 40px;">
                <button onclick="handleLoginRedirect()" style="
                    padding: 15px 40px;
                    background: #005b4c;
                    color: #d8eb8e;
                    border: none;
                    border-radius: 50px;
                    font-size: 1.2rem;
                    font-weight: bold;
                    cursor: pointer;
                    transition: all 0.3s;
                    margin: 0 10px 20px 10px;
                    min-width: 200px;
                " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 10px 25px rgba(0, 91, 76, 0.3)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>
                
                <button onclick="handleRegisterRedirect()" style="
                    padding: 15px 40px;
                    background: #d8eb8e;
                    color: #005b4c;
                    border: 2px solid #005b4c;
                    border-radius: 50px;
                    font-size: 1.2rem;
                    font-weight: bold;
                    cursor: pointer;
                    transition: all 0.3s;
                    margin: 0 10px;
                    min-width: 200px;
                " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 10px 25px rgba(216, 235, 142, 0.3)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                    <i class="fas fa-user-plus"></i> Register
                </button>
            </div>
            
           
        </div>
    </div>

    <script>
    // Quiz Access Control System
    function checkQuizAccess() {
        // Check if user is logged in using the UserManager
        if (window.userManager && window.userManager.isLoggedIn()) {
            // User is logged in - hide access control and show quiz
            document.getElementById('quiz-access-control').style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Show welcome message
            const user = window.userManager.getCurrentUser();
            if (user) {
                // Create and show welcome toast
                showWelcomeMessage(user);
            }
            return true;
        }
        
        // User is not logged in - show access control
        document.getElementById('quiz-access-control').style.display = 'flex';
        document.body.style.overflow = 'hidden';
        return false;
    }

    function showWelcomeMessage(user) {
        // Create a custom welcome message element
        const welcomeDiv = document.createElement('div');
        welcomeDiv.id = 'welcome-toast';
        welcomeDiv.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #005b4c, #024238);
            color: #d8eb8e;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 10000;
            border-left: 5px solid #d8eb8e;
            max-width: 400px;
            animation: slideInRight 0.5s ease-out;
            font-family: 'Kurale', serif;
        `;
        
        welcomeDiv.innerHTML = `
            <div style="display: flex; align-items: center; gap: 15px;">
                <img src="${user.avatar}" 
                    alt="${user.firstName}" 
                    style="width: 50px; height: 50px; border-radius: 50%; border: 2px solid #d8eb8e;">
                <div>
                    <h4 style="margin: 0 0 5px 0; color: #d8eb8e;">Welcome, ${user.firstName}!</h4>
                    <p style="margin: 0; font-size: 0.9rem; opacity: 0.9;">
                        Ready to test your environmental knowledge?
                    </p>
                </div>
            </div>
        `;
        
        document.body.appendChild(welcomeDiv);
        
        // Auto-remove after 5 seconds
        setTimeout(() => {
            welcomeDiv.style.animation = 'slideOutRight 0.5s ease-out';
            setTimeout(() => welcomeDiv.remove(), 500);
        }, 5000);
    }

    // Handle login redirect
    function handleLoginRedirect() {
        // Store the current URL to return to after login
        sessionStorage.setItem('returnToQuiz', window.location.href);
        
        // Redirect to main site login page
        
        window.location.href = '/Beyond-the-Bench/index.html#login'; 
    }

    // Handle register redirect
    function handleRegisterRedirect() {
        // Store the current URL to return to after registration
        sessionStorage.setItem('returnToQuiz', window.location.href);
        
        // Redirect to main site registration page
      
        window.location.href = '/Beyond-the-Bench/index.html#register'; 
    }

    // Check if we're returning from successful login/registration
    function checkReturnFromAuth() {
        const returnToQuiz = sessionStorage.getItem('returnToQuiz');
        const justLoggedIn = sessionStorage.getItem('justLoggedIn');
        
        if (returnToQuiz && justLoggedIn === 'true') {
            // Clear the flags
            sessionStorage.removeItem('returnToQuiz');
            sessionStorage.removeItem('justLoggedIn');
            
            // Check access again
            if (checkQuizAccess()) {
                // Show welcome message again
                const user = window.userManager.getCurrentUser();
                if (user) {
                    setTimeout(() => showWelcomeMessage(user), 500);
                }
            }
        }
    }

    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Check for user manager on window
        if (!window.userManager) {
            // If userManager doesn't exist globally, check localStorage directly
            const currentUser = localStorage.getItem('beyondTheBenchCurrentUser');
            if (currentUser) {
                // User exists in localStorage - create minimal userManager object
                window.userManager = {
                    isLoggedIn: function() {
                        return localStorage.getItem('beyondTheBenchCurrentUser') !== null;
                    },
                    getCurrentUser: function() {
                        try {
                            return JSON.parse(localStorage.getItem('beyondTheBenchCurrentUser'));
                        } catch (e) {
                            return null;
                        }
                    }
                };
            } else {
                // No user manager or user - show access control
                document.getElementById('quiz-access-control').style.display = 'flex';
                document.body.style.overflow = 'hidden';
                return;
            }
        }
        
        // Check access and handle returns from auth
        setTimeout(() => {
            checkQuizAccess();
            checkReturnFromAuth();
        }, 100);
    });

    // Add this to your login/registration success handlers on the main site:
    // After successful login/registration, set these flags:
    // sessionStorage.setItem('justLoggedIn', 'true');
    // Then redirect back to quiz page
    </script>

   <div id="fireworks-container"></div>

    <!-- Audio Elements -->
    <audio id="correct-sound" preload="auto">
        <source src="audio/correct_answer.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="incorrect-sound" preload="auto">
        <source src="audio/wrong_answer.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="celebration-sound" preload="auto">
        <source src="audio/yeah-excited-crowd-gfx-sounds-3-3-00-01.mp3" type="audio/mpeg">
    </audio>

    <audio id="boo-sound" preload="auto">
        <source src="audio/cartoon-fail-music-sting-tomas-herudek-1-00-04.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="timer-sound" preload="auto">
        <source src="" type="audio/mpeg">
    </audio>
    
    
    <!-- Audio Controls -->
    <div class="audio-controls">
        <button class="audio-btn" id="toggle-sound">
            <i class="fas fa-volume-up"></i>
        </button>
    </div>

    

    <div class="container">
        <!-- Header -->
        <header>
            <h1 class="logo">ðŸŒ¿ Park Environment Quiz ðŸŒ¿</h1>
            <p class="tagline">Test your knowledge about parks, conservation, and environmental protection. Complete all questions before time runs out!</p>
        </header>

        <!-- Timer & Score -->
        <div class="timer-container">
            <div class="score-display">
                Score: <span id="current-score">0</span>/<span id="total-score">10</span>
            </div>
            
            <div class="timer-display">
                <div class="timer-label">Time Remaining</div>
                <div class="timer" id="timer">05:00</div>
                <button id="start-timer-btn">Start Timer</button>

            </div>
            

            <div class="progress-display">
                <div class="timer-label">Question Progress</div>
                <div style="font-size: 2.5rem; font-weight: 700; color: #cbe75b;">
                    <span id="current-q">1</span>/<span id="total-q">10</span>
                </div>
            </div>
        </div>

        <!-- Quiz Container -->
        <div class="quiz-container">
            <!-- Question 1 -->
            <div class="question-container active" id="question-1">
                <div class="question-number">Question 1 of 10</div>
                <h2 class="question-text">Which of the following is the most effective way to reduce plastic pollution in parks?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="true" data-value="A">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-recycle fa-bounce"></i></div>   
                        <div class="option-text">Using reusable water bottles and containers</div>
                        <div class="feedback">Correct! Reusable items significantly reduce single-use plastic waste in parks.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="C">
                       <div class="option-icon" style="color: #005b4c;"><i class="fas fa-fire fa-bounce"></i></div> 
                        <div class="option-text">Burning plastic in campfires</div>
                        <div class="feedback">Incorrect. Burning plastic releases toxic fumes harmful to health and environment.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="D">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-water fa-bounce"></i></div>   
                        <div class="option-text">Throwing plastic in park water bodies</div>
                        <div class="feedback">Incorrect. This pollutes water sources and harms aquatic life.</div>
                    </div>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="question-container" id="question-2">
                <div class="question-number">Question 2 of 10</div>
                <h2 class="question-text">What percentage of the Earth's oxygen is produced by trees and plants in forests and parks?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="false" data-value="A">
                       <div class="option-icon" style="color: #005b4c;"><i class="fas fa-tree fa-bounce"></i></div> 
                        <div class="option-text">About 10%</div>
                        <div class="feedback">Incorrect. The actual percentage is much higher.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-tree fa-bounce"></i></div> 
                        <div class="option-text">About 30%</div>
                        <div class="feedback">Incorrect. Trees contribute more than this to our oxygen supply.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="C">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-tree fa-bounce"></i></div> 
                        <div class="option-text">About 50%</div>
                        <div class="feedback">Correct! Approximately half of Earth's oxygen comes from trees and plants.</div>
                    </div>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="question-container" id="question-3">
                <div class="question-number">Question 3 of 10</div>
                <h2 class="question-text">Which of these activities is most harmful to park ecosystems?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="false" data-value="A">
                        <div class="option-icon"  style="color: #005b4c;"><i class="fas fa-walking fa-bounce"></i></div>  
                        <div class="option-text">Walking on designated trails</div>
                        <div class="feedback">Incorrect. Staying on trails actually helps protect ecosystems.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="B">
                       <div class="option-icon"  style="color: #005b4c;"><i class="fas fa-seedling fa-bounce"></i></div> 
                        <div class="option-text">Removing native plants or introducing invasive species</div>
                        <div class="feedback">Correct! This disrupts the natural balance and can destroy local ecosystems.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="C">
                        <div class="option-icon" style="color: #005b4c;" ><i class="fas fa-camera  fa-bounce"></i></div>
                        <div class="option-text">Taking photographs of wildlife from a distance</div>
                        <div class="feedback">Incorrect. Responsible photography doesn't harm ecosystems.</div>
                    </div>
                
                </div>
            </div>

            <!-- Question 4 -->
            <div class="question-container" id="question-4">
                <div class="question-number">Question 4 of 10</div>
                <h2 class="question-text">How do urban parks help combat climate change?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="false" data-value="A">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-city fa-bounce"></i></div>
                        <div class="option-text">By reducing noise pollution in cities</div>
                        <div class="feedback">Incorrect. While they do reduce noise, this isn't their main climate benefit.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-thermometer-half fa-bounce"></i></div>
                        <div class="option-text">By absorbing CO2 and reducing urban heat island effect</div>
                        <div class="feedback">Correct! Trees absorb carbon dioxide and provide cooling through shade and transpiration.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="C">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-car fa-bounce"></i></div>          
                        <div class="option-text">By providing parking spaces for electric vehicles</div>
                        <div class="feedback">Incorrect. Parks aren't typically designed for vehicle parking.</div>
                    </div>
            
                </div>
            </div>

            <!-- Question 5 -->
            <div class="question-container" id="question-5">
                <div class="question-number">Question 5 of 10</div>
                <h2 class="question-text">What is the "Leave No Trace" principle for parks?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="true" data-value="A">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-leaf fa-bounce"></i></div>  
                        <div class="option-text">Minimizing human impact by taking all waste with you</div>
                        <div class="feedback">Correct! Leave No Trace means leaving the park as you found it, or better.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-campground fa-bounce"></i></div>
                        <div class="option-text">Building permanent structures for future visitors</div>
                        <div class="feedback">Incorrect. Permanent structures actually violate Leave No Trace principles.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="C">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-lightbulb fa-bounce"></i></div>
                        <div class="option-text">Using bright lights at night to scare away animals</div>
                        <div class="feedback">Incorrect. Artificial light can disrupt wildlife natural behaviors.</div>
                    </div>
                    
                </div>
            </div>

            <!-- Question 6 -->
            <div class="question-container" id="question-6">
                <div class="question-number">Question 6 of 10</div>
                <h2 class="question-text">Which of these materials takes the LONGEST to decompose in a park environment?</h2>
                <div class="options-grid">
                
                    <div class="option" data-correct="false" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-newspaper fa-bounce"></i></div> 
                        <div class="option-text">Newspaper </div>
                        <div class="feedback">Incorrect. It takes only 6 weeks to decompose. Paper decomposes much faster than plastic.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="C">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-mug-saucer fa-bounce"></i></div>
                        <div class="option-text">Plastic bottle </div>
                        <div class="feedback">Incorrect. It takes 450 years to decompose. While plastic bottles take long, something takes even longer.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="D">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-battery-full fa-bounce"></i></div>
                        <div class="option-text">Glass bottle </div>
                        <div class="feedback">Correct! Glass can take up to 1 million years to decompose naturally.</div>
                    </div>
                </div>
            </div>

            <!-- Question 7 -->
            <div class="question-container" id="question-7">
                <div class="question-number">Question 7 of 10</div>
                <h2 class="question-text">What is the main benefit of having diverse plant species in a park?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="false" data-value="A">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-palette fa-bounce"></i></div>
                        <div class="option-text">Making the park more colorful for photographs</div>
                        <div class="feedback">Incorrect. While aesthetically pleasing, this isn't the main ecological benefit.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-bug fa-bounce"></i></div>
                        <div class="option-text">Supporting a wider range of wildlife and increasing ecosystem resilience</div>
                        <div class="feedback">Correct! Biodiversity creates healthier, more resilient ecosystems.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="C">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-coins fa-bounce"></i></div>
                        <div class="option-text">Reducing maintenance costs for park staff</div>
                        <div class="feedback">Incorrect. Diverse ecosystems often require more, not less, management.</div>
                    </div>
                   
                </div>
            </div>

            <!-- Question 8 -->
            <div class="question-container" id="question-8">
                <div class="question-number">Question 8 of 10</div>
                <h2 class="question-text">How does feeding wildlife in parks harm the animals?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="false" data-value="A">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-crow fa-bounce"></i></div>
                        <div class="option-text">It makes them too friendly with humans</div>
                        <div class="feedback">Incorrect. While true, this isn't the primary harm.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-bread-slice fa-bounce"></i></div>
                        <div class="option-text">Human food can cause malnutrition and dependency</div>
                        <div class="feedback">Correct! Human food lacks proper nutrients for wildlife and creates unhealthy dependence.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="C">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-users fa-bounce"></i></div>
                        <div class="option-text">It attracts too many tourists to the park</div>
                        <div class="feedback">Incorrect. While feeding might attract people, the main harm is to the animals themselves.</div>
                    </div>
                   
                </div>
            </div>

            <!-- Question 9 -->
            <div class="question-container" id="question-9">
                <div class="question-number">Question 9 of 10</div>
                <h2 class="question-text">What percentage of the world's land surface is currently protected as parks or conservation areas?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="false" data-value="A">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-globe fa-bounce"></i></div> 
                        <div class="option-text">About 5%</div>
                        <div class="feedback">Incorrect. The actual percentage is higher.</div>
                    </div>
                    <div class="option" data-correct="false" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-globe fa-bounce"></i></div> 
                        <div class="option-text">About 10%</div>
                        <div class="feedback">Incorrect. More land is protected than this.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="C">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-globe fa-bounce"></i></div> 
                        <div class="option-text">About 15%</div>
                        <div class="feedback">Correct! Approximately 15% of Earth's land surface is protected.</div>
                    </div>
                  
                </div>
            </div>

            <!-- Question 10 -->
            <div class="question-container" id="question-10">
                <div class="question-number">Question 10 of 10</div>
                <h2 class="question-text">Which energy source is most sustainable for powering park facilities?</h2>
                <div class="options-grid">
                    <div class="option" data-correct="false" data-value="A">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-gas-pump fa-bounce"></i></div>
                        <div class="option-text">Diesel generators</div>
                        <div class="feedback">Incorrect. These produce emissions and noise pollution.</div>
                    </div>
                    <div class="option" data-correct="true" data-value="B">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-sun fa-bounce"></i></div> 
                        <div class="option-text">Solar panels with battery storage</div>
                        <div class="feedback">Correct! Solar is clean, quiet, and sustainable for park environments.</div>
                    </div>
                
                    <div class="option" data-correct="false" data-value="D">
                        <div class="option-icon" style="color: #005b4c;"><i class="fas fa-plug fa-bounce"></i></div> 
                        <div class="option-text">Extending the city's electrical grid</div>
                        <div class="feedback">Incorrect. This often requires disrupting natural habitats with power lines.</div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="navigation">
                <button class="btn btn-prev" id="prev-btn" disabled>
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="btn btn-next" id="next-btn">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-container" id="results-container">
            <h2 class="results-title">Quiz Results</h2>
            
            <div class="score-circle" id="score-circle">
                <div class="score-value" id="final-score">0</div>
                <div class="score-total">/ 10</div>
            </div>
            
            <div class="score-message" id="score-message"></div>
            
       
            
            <div class="results-details">
                <div class="detail-item">
                    <span>Total Questions:</span>
                    <span>10</span>
                </div>
                <div class="detail-item">
                    <span>Correct Answers:</span>
                    <span class="detail-correct" id="correct-answers">0</span>
                </div>
                <div class="detail-item">
                    <span>Incorrect Answers:</span>
                    <span class="detail-incorrect" id="incorrect-answers">0</span>
                </div>
                <div class="detail-item">
                    <span>Time Taken:</span>
                    <span id="time-taken">0:00</span>
                </div>
                <div class="detail-item">
                    <span>Accuracy:</span>
                    <span id="accuracy">0%</span>
                </div>
            </div>
            
            <div style="margin-top: 40px;">
                <p style="font-size: 1.1rem; color: #d8eb8e; max-width: 700px; margin: 0 auto 30px;">
                    <strong>Environmental Tip:</strong> <span id="environment-tip">Every small action counts! Reducing plastic use, staying on trails, and respecting wildlife all contribute to healthier parks.</span>
                </p>
            </div>
            
            <button class="btn btn-submit" id="restart-btn">
                <i class="fas fa-redo"></i> Take Quiz Again
            </button>
        </div>

       

    </div>

   <script>
    let quizStarted = false;

    const startTimerBtn = document.getElementById('start-timer-btn');

    // Lock all options initially
    document.querySelectorAll('.option').forEach(opt => {
        opt.classList.add('locked');
    });

    // Start Timer Button click
    startTimerBtn.addEventListener('click', startQuizTimer);

    function startQuizTimer() {
        if (quizStarted) return;

        quizStarted = true;
        startTimer();
        startTimerBtn.style.display = "none";

        // Unlock all options
        document.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('locked');
        });
    }

    // Quiz Configuration
    const QUIZ_CONFIG = {
        totalQuestions: 10,
        timeLimit:  300, // 5 minutes in seconds
        passingScore: 7,
        perfectScore: 10
    };

    // Quiz State
    let quizState = {
        currentQuestion: 1,
        score: 0,
        userAnswers: new Array(QUIZ_CONFIG.totalQuestions).fill(null),
        quizCompleted: false,
        startTime: null,
        endTime: null,
        timerInterval: null,
        timeRemaining: QUIZ_CONFIG.timeLimit,
        soundEnabled: true
    };

    // DOM Elements
    const timerElement = document.getElementById('timer');
    const currentScoreElement = document.getElementById('current-score');
    const totalScoreElement = document.getElementById('total-score');
    const currentQElement = document.getElementById('current-q');
    const totalQElement = document.getElementById('total-q');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const restartBtn = document.getElementById('restart-btn');
    const resultsContainer = document.getElementById('results-container');
    const quizContainer = document.querySelector('.quiz-container');
    const fireworksContainer = document.getElementById('fireworks-container');
    const toggleSoundBtn = document.getElementById('toggle-sound');
    

    // Audio Elements
    const correctSound = document.getElementById('correct-sound');
    const incorrectSound = document.getElementById('incorrect-sound');
    const celebrationSound = document.getElementById('celebration-sound');
    const timerSound = document.getElementById('timer-sound');
    const booSound = document.getElementById('boo-sound');


    // Initialize Quiz
    function initQuiz() {
        totalScoreElement.textContent = QUIZ_CONFIG.totalQuestions;
        totalQElement.textContent = QUIZ_CONFIG.totalQuestions;
        currentQElement.textContent = 1;
        updateScoreDisplay();

        // Disable navigation at start
        nextBtn.disabled = true;
        prevBtn.disabled = true;

        // Option click handling
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                // Prevent click if quiz not started
                if (!quizStarted || quizState.quizCompleted || this.classList.contains('disabled')) return;

                const questionContainer = this.closest('.question-container');
                const questionId = questionContainer.id;
                const questionNum = parseInt(questionId.split('-')[1]);

                // Already answered?
                if (quizState.userAnswers[questionNum - 1] !== null) return;

                // Disable all options in this question
                questionContainer.querySelectorAll('.option').forEach(opt => {
                    opt.classList.add('disabled');
                });

                // Mark selected
                this.classList.add('selected');

                // Check correctness
                const isCorrect = this.getAttribute('data-correct') === 'true';
                if (isCorrect) {
                    this.classList.add('correct');
                    quizState.score++;
                    updateScoreDisplay();
                    if (quizState.soundEnabled) {
                        correctSound.currentTime = 0;
                        correctSound.play();
                    }
                    this.classList.add('correct-answer');
                } else {
                    this.classList.add('incorrect');
                    if (quizState.soundEnabled) {
                        incorrectSound.currentTime = 0;
                        incorrectSound.play();
                    }
                    this.classList.add('incorrect-answer');
                    const correctOption = questionContainer.querySelector('.option[data-correct="true"]');
                    correctOption.classList.add('correct', 'correct-answer');
                }

                // Store answer
                quizState.userAnswers[questionNum - 1] = {
                    selected: this.getAttribute('data-value'),
                    correct: isCorrect
                };

                // Enable next button only if this is current question
                if (questionNum === quizState.currentQuestion) {
                    nextBtn.disabled = false;
                }

                // Auto-advance after 2 seconds
                setTimeout(() => {
                    if (questionNum < QUIZ_CONFIG.totalQuestions) {
                        nextQuestion();
                    } else {
                        nextBtn.textContent = 'Submit Quiz';
                    }
                }, 2000);
            });
        });

        // Navigation
        nextBtn.addEventListener('click', handleNextButton);
        prevBtn.addEventListener('click', prevQuestion);
        restartBtn.addEventListener('click', restartQuiz);
        toggleSoundBtn.addEventListener('click', toggleSound);
    }

    // Timer
    function startTimer() {
        quizState.startTime = Date.now();
        quizState.timeRemaining = QUIZ_CONFIG.timeLimit;
        updateTimerDisplay();

        quizState.timerInterval = setInterval(() => {
            quizState.timeRemaining--;
            updateTimerDisplay();

            if (quizState.timeRemaining === 30 && quizState.soundEnabled) {
                timerSound.currentTime = 0;
                timerSound.play();
                timerElement.classList.add('warning');
            }

            if (quizState.timeRemaining <= 0) {
                clearInterval(quizState.timerInterval);
                timerElement.textContent = "00:00";
                timerElement.classList.add('warning');
                if (!quizState.quizCompleted) {
                    completeQuiz();
                }
            }
        }, 1000);
    }

    function updateTimerDisplay() {
        const minutes = Math.floor(quizState.timeRemaining / 60);
        const seconds = quizState.timeRemaining % 60;
        timerElement.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    }

    function stopTimer() {
        clearInterval(quizState.timerInterval);
        quizState.endTime = Date.now();
    }

    // Navigation
    function handleNextButton() {
        if (quizState.currentQuestion < QUIZ_CONFIG.totalQuestions) {
            nextQuestion();
        } else {
            completeQuiz();
        }
    }

    function nextQuestion() {
        if (quizState.currentQuestion < QUIZ_CONFIG.totalQuestions) {
            document.getElementById(`question-${quizState.currentQuestion}`).classList.remove('active');
            quizState.currentQuestion++;
            document.getElementById(`question-${quizState.currentQuestion}`).classList.add('active');
            currentQElement.textContent = quizState.currentQuestion;

            prevBtn.disabled = false;
            nextBtn.disabled = quizState.userAnswers[quizState.currentQuestion - 1] === null;

            if (quizState.currentQuestion === QUIZ_CONFIG.totalQuestions) {
                nextBtn.innerHTML = 'Submit Quiz <i class="fas fa-paper-plane"></i>';
            }
        }
    }

    function prevQuestion() {
        if (quizState.currentQuestion > 1) {
            document.getElementById(`question-${quizState.currentQuestion}`).classList.remove('active');
            quizState.currentQuestion--;
            document.getElementById(`question-${quizState.currentQuestion}`).classList.add('active');
            currentQElement.textContent = quizState.currentQuestion;

            nextBtn.disabled = quizState.userAnswers[quizState.currentQuestion - 1] === null;
            prevBtn.disabled = quizState.currentQuestion === 1;
            nextBtn.innerHTML = 'Next <i class="fas fa-arrow-right"></i>';
        }
    }

   // Complete Quiz
function completeQuiz() {
    quizState.quizCompleted = true;
    stopTimer();

    quizContainer.style.display = 'none';

    const timeTaken = QUIZ_CONFIG.timeLimit - quizState.timeRemaining;
    const minutesTaken = Math.floor(timeTaken / 60);
    const secondsTaken = timeTaken % 60;

    const correctAnswers = quizState.score;
    const incorrectAnswers = QUIZ_CONFIG.totalQuestions - correctAnswers;
    const accuracy = Math.round((correctAnswers / QUIZ_CONFIG.totalQuestions) * 100);

    // Update result elements
    document.getElementById('final-score').textContent = correctAnswers;
    document.getElementById('correct-answers').textContent = correctAnswers;
    document.getElementById('incorrect-answers').textContent = incorrectAnswers;
    document.getElementById('time-taken').textContent = `${minutesTaken}:${secondsTaken.toString().padStart(2,'0')}`;
    document.getElementById('accuracy').textContent = `${accuracy}%`;

    const scoreCircle = document.getElementById('score-circle');
    scoreCircle.style.setProperty('--score-percent', accuracy);

    const scoreMessage = document.getElementById('score-message');
    let message = '', tip = '';

    if (correctAnswers === QUIZ_CONFIG.perfectScore) {
        // Perfect score
        message = "PERFECT SCORE! ENVIRONMENT CHAMPION!";
        tip = "You have excellent environmental knowledge! Share it with others.";
     
        showCelebration('celebration'); // fireworks + celebration sound
    } else if (correctAnswers >= QUIZ_CONFIG.passingScore) {
        // Good score
        message = "You have amazing knowledge in environmental awareness!";
        tip = "Keep it up! Continue learning and practicing what you know.";
     
        showCelebration('celebration'); // fireworks + celebration sound
    } else {
        // Low score
        message = "You should try harder next time!";
        tip = "Don't worry! Study more and improve your environmental knowledge.";
        showCelebration('sad'); // sad visual + booing sound
    }

    scoreMessage.textContent = message;
    document.getElementById('environment-tip').textContent = tip;
    resultsContainer.style.display = 'block';
}

function showCelebration(type) {
    const fireworksContainer = document.getElementById('fireworks-container');
    if (!fireworksContainer) return;

    fireworksContainer.style.display = 'block';
    fireworksContainer.innerHTML = '';

    // stop sounds
    celebrationSound?.pause();
    celebrationSound.currentTime = 0;

    const booSound = document.getElementById('boo-sound');
    if (booSound) {
        booSound.pause();
        booSound.currentTime = 0;
    }

    if (type === 'celebration') {
        if (quizState.soundEnabled && celebrationSound) celebrationSound.play();

        createMegaFireworks();
        const interval = setInterval(createMegaFireworks, 400);

        setTimeout(() => {
            clearInterval(interval);
            fireworksContainer.innerHTML = '';
            fireworksContainer.style.display = 'none';
        }, 9000);

    } else {
        if (quizState.soundEnabled && booSound) booSound.play();

        createSadRain();
        createBrokenSparks();

        setTimeout(() => {
            fireworksContainer.innerHTML = '';
            fireworksContainer.style.display = 'none';
        }, 6000);
    }
}

function createMegaFireworks() {
    const container = document.getElementById('fireworks-container');
    const colors = ['#ff004c', '#ffdd00', '#00f5d4', '#7b2cbf', '#ff7b00'];

    const centerX = Math.random() * 100;
    const centerY = Math.random() * 60;

    // shockwave ring
    const ring = document.createElement('div');
    ring.className = 'shockwave';
    ring.style.left = `${centerX}%`;
    ring.style.top = `${centerY}%`;
    container.appendChild(ring);
    setTimeout(() => ring.remove(), 1200);

    // sparks
    for (let i = 0; i < 40; i++) {
        const spark = document.createElement('div');
        spark.className = 'mega-firework';

        const size = Math.random() * 5 + 4;
        const color = colors[Math.floor(Math.random() * colors.length)];

        spark.style.width = `${size}px`;
        spark.style.height = `${size}px`;
        spark.style.backgroundColor = color;
        spark.style.boxShadow = `0 0 15px ${color}`;
        spark.style.left = `${centerX}%`;
        spark.style.top = `${centerY}%`;
        spark.style.setProperty('--x', `${Math.random() * 300 - 150}px`);
        spark.style.setProperty('--y', `${Math.random() * 300 - 150}px`);

        container.appendChild(spark);
        setTimeout(() => spark.remove(), 1600);
    }
}

function createSadRain() {
    const container = document.getElementById('fireworks-container');

    for (let i = 0; i < 60; i++) {
        const drop = document.createElement('div');
        drop.className = 'rain-drop';

        drop.style.left = `${Math.random() * 100}%`;
        drop.style.animationDuration = `${1.5 + Math.random()}s`;

        container.appendChild(drop);
        setTimeout(() => drop.remove(), 3000);
    }
}
function createBrokenSparks() {
    const container = document.getElementById('fireworks-container');

    for (let i = 0; i < 30; i++) {
        const spark = document.createElement('div');
        spark.className = 'broken-spark';

        spark.style.left = `${Math.random() * 100}%`;
        spark.style.animationDuration = `${2 + Math.random()}s`;

        container.appendChild(spark);
        setTimeout(() => spark.remove(), 4000);
    }
}

    // Utilities
    function updateScoreDisplay() {
        currentScoreElement.textContent = quizState.score;
    }

    function restartQuiz() {
        // Reset state
        quizState = {
            currentQuestion: 1,
            score: 0,
            userAnswers: new Array(QUIZ_CONFIG.totalQuestions).fill(null),
            quizCompleted: false,
            startTime: null,
            endTime: null,
            timerInterval: null,
            timeRemaining: QUIZ_CONFIG.timeLimit,
            soundEnabled: quizState.soundEnabled
        };

        quizStarted = false;
        startTimerBtn.style.display = "inline-block";

        // Reset UI
        quizContainer.style.display = 'block';
        resultsContainer.style.display = 'none';
        document.querySelectorAll('.question-container').forEach(c => c.classList.remove('active'));
        document.getElementById('question-1').classList.add('active');

        document.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('selected','correct','incorrect','disabled','correct-answer','incorrect-answer');
            opt.classList.add('locked');
        });

        prevBtn.disabled = true;
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'Next <i class="fas fa-arrow-right"></i>';
        currentQElement.textContent = 1;
        updateScoreDisplay();

        clearInterval(quizState.timerInterval);
        timerElement.classList.remove('warning');
        timerElement.textContent = "00:00";
    }

    function toggleSound() {
        quizState.soundEnabled = !quizState.soundEnabled;
        const icon = toggleSoundBtn.querySelector('i');
        if (quizState.soundEnabled) {
            icon.className = 'fas fa-volume-up';
            toggleSoundBtn.style.background = '#005b4c';
        } else {
            icon.className = 'fas fa-volume-mute';
            toggleSoundBtn.style.background = '#005b4c';
        }
    }

   document.addEventListener('DOMContentLoaded', () => {
    // Show alert when page loads
    alert("Start the timer first before answering and see how well you can do!");

    // Initialize quiz
    initQuiz();
});

</script>

</body>

</html>
